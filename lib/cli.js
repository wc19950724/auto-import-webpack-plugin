#!/usr/bin/env node
"use strict";var e=require("node:fs"),t=require("node:path"),n=require("events"),r=require("child_process"),i=require("path"),o=require("fs"),s=require("process"),a=require("node:buffer"),c=require("node:child_process"),l=require("node:process"),u=require("node:url"),p=require("node:os"),h=require("assert"),d=require("buffer"),m=require("stream"),f=require("util"),g=require("node:util"),b=require("node:tty"),_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var O={exports:{}},y={},w={};let x=class extends Error{constructor(e,t,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}};w.CommanderError=x,w.InvalidArgumentError=class extends x{constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};const{InvalidArgumentError:C}=w;y.Argument=class{constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(e,t)=>{if(!this.argChoices.includes(e))throw new C(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(e,t):e},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},y.humanReadableArgName=function(e){const t=e.name()+(!0===e.variadic?"...":"");return e.required?"<"+t+">":"["+t+"]"};var E={},A={};const{humanReadableArgName:S}=y;A.Help=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(e){const t=e.commands.filter((e=>!e._hidden));if(e._hasImplicitHelpCommand()){const[,n,r]=e._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),i=e.createCommand(n).helpOption(!1);i.description(e._helpCommandDescription),r&&i.arguments(r),t.push(i)}return this.sortSubcommands&&t.sort(((e,t)=>e.name().localeCompare(t.name()))),t}compareOptions(e,t){const n=e=>e.short?e.short.replace(/^-/,""):e.long.replace(/^--/,"");return n(e).localeCompare(n(t))}visibleOptions(e){const t=e.options.filter((e=>!e.hidden)),n=e._hasHelpOption&&e._helpShortFlag&&!e._findOption(e._helpShortFlag),r=e._hasHelpOption&&!e._findOption(e._helpLongFlag);if(n||r){let i;i=n?r?e.createOption(e._helpFlags,e._helpDescription):e.createOption(e._helpShortFlag,e._helpDescription):e.createOption(e._helpLongFlag,e._helpDescription),t.push(i)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];const t=[];for(let n=e.parent;n;n=n.parent){const e=n.options.filter((e=>!e.hidden));t.push(...e)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleArguments(e){return e._argsDescription&&e._args.forEach((t=>{t.description=t.description||e._argsDescription[t.name()]||""})),e._args.find((e=>e.description))?e._args:[]}subcommandTerm(e){const t=e._args.map((e=>S(e))).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce(((e,n)=>Math.max(e,t.subcommandTerm(n).length)),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce(((e,n)=>Math.max(e,t.optionTerm(n).length)),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce(((e,n)=>Math.max(e,t.optionTerm(n).length)),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce(((e,n)=>Math.max(e,t.argumentTerm(n).length)),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let n="";for(let t=e.parent;t;t=t.parent)n=t.name()+" "+n;return n+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){const t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`),void 0!==e.defaultValue){(e.required||e.optional||e.isBoolean()&&"boolean"==typeof e.defaultValue)&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`)}return void 0!==e.presetArg&&e.optional&&t.push(`preset: ${JSON.stringify(e.presetArg)}`),void 0!==e.envVar&&t.push(`env: ${e.envVar}`),t.length>0?`${e.description} (${t.join(", ")})`:e.description}argumentDescription(e){const t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`),void 0!==e.defaultValue&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){const n=`(${t.join(", ")})`;return e.description?`${e.description} ${n}`:n}return e.description}formatHelp(e,t){const n=t.padWidth(e,t),r=t.helpWidth||80;function i(e,i){if(i){const o=`${e.padEnd(n+2)}${i}`;return t.wrap(o,r-2,n+2)}return e}function o(e){return e.join("\n").replace(/^/gm," ".repeat(2))}let s=[`Usage: ${t.commandUsage(e)}`,""];const a=t.commandDescription(e);a.length>0&&(s=s.concat([t.wrap(a,r,0),""]));const c=t.visibleArguments(e).map((e=>i(t.argumentTerm(e),t.argumentDescription(e))));c.length>0&&(s=s.concat(["Arguments:",o(c),""]));const l=t.visibleOptions(e).map((e=>i(t.optionTerm(e),t.optionDescription(e))));if(l.length>0&&(s=s.concat(["Options:",o(l),""])),this.showGlobalOptions){const n=t.visibleGlobalOptions(e).map((e=>i(t.optionTerm(e),t.optionDescription(e))));n.length>0&&(s=s.concat(["Global Options:",o(n),""]))}const u=t.visibleCommands(e).map((e=>i(t.subcommandTerm(e),t.subcommandDescription(e))));return u.length>0&&(s=s.concat(["Commands:",o(u),""])),s.join("\n")}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}wrap(e,t,n,r=40){const i=new RegExp("[\\n][ \\f\\t\\v   -   　\ufeff]+");if(e.match(i))return e;const o=t-n;if(o<r)return e;const s=e.slice(0,n),a=e.slice(n).replace("\r\n","\n"),c=" ".repeat(n),l="\\s​",u=new RegExp(`\n|.{1,${o-1}}([${l}]|$)|[^${l}]+?([${l}]|$)`,"g");return s+(a.match(u)||[]).map(((e,t)=>"\n"===e?"":(t>0?c:"")+e.trimEnd())).join("\n")}};var $={};const{InvalidArgumentError:T}=w;function I(e){let t,n;const r=e.split(/[ |,]+/);return r.length>1&&!/^[[<]/.test(r[1])&&(t=r.shift()),n=r.shift(),!t&&/^-[^-]$/.test(n)&&(t=n,n=void 0),{shortFlag:t,longFlag:n}}$.Option=class{constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;const n=I(e);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let t=e;return"string"==typeof e&&(t={[e]:!0}),this.implied=Object.assign(this.implied||{},t),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}choices(e){return this.argChoices=e.slice(),this.parseArg=(e,t)=>{if(!this.argChoices.includes(e))throw new T(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(e,t):e},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce(((e,t)=>e+t[0].toUpperCase()+t.slice(1)))}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},$.splitOptionFlags=I,$.DualOptions=class{constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach((e=>{e.negate?this.negativeOptions.set(e.attributeName(),e):this.positiveOptions.set(e.attributeName(),e)})),this.negativeOptions.forEach(((e,t)=>{this.positiveOptions.has(t)&&this.dualOptions.add(t)}))}valueFromOption(e,t){const n=t.attributeName();if(!this.dualOptions.has(n))return!0;const r=this.negativeOptions.get(n).presetArg,i=void 0!==r&&r;return t.negate===(i===e)}};var P={};const k=3;P.suggestSimilar=function(e,t){if(!t||0===t.length)return"";t=Array.from(new Set(t));const n=e.startsWith("--");n&&(e=e.slice(2),t=t.map((e=>e.slice(2))));let r=[],i=k;return t.forEach((t=>{if(t.length<=1)return;const n=function(e,t){if(Math.abs(e.length-t.length)>k)return Math.max(e.length,t.length);const n=[];for(let t=0;t<=e.length;t++)n[t]=[t];for(let e=0;e<=t.length;e++)n[0][e]=e;for(let r=1;r<=t.length;r++)for(let i=1;i<=e.length;i++){let o=1;o=e[i-1]===t[r-1]?0:1,n[i][r]=Math.min(n[i-1][r]+1,n[i][r-1]+1,n[i-1][r-1]+o),i>1&&r>1&&e[i-1]===t[r-2]&&e[i-2]===t[r-1]&&(n[i][r]=Math.min(n[i][r],n[i-2][r-2]+1))}return n[e.length][t.length]}(e,t),o=Math.max(e.length,t.length);(o-n)/o>.4&&(n<i?(i=n,r=[t]):n===i&&r.push(t))})),r.sort(((e,t)=>e.localeCompare(t))),n&&(r=r.map((e=>`--${e}`))),r.length>1?`\n(Did you mean one of ${r.join(", ")}?)`:1===r.length?`\n(Did you mean ${r[0]}?)`:""};const j=n.EventEmitter,N=r,H=i,R=o,F=s,{Argument:V,humanReadableArgName:G}=y,{CommanderError:M}=w,{Help:D}=A,{Option:B,splitOptionFlags:L,DualOptions:U}=$,{suggestSimilar:q}=P;function W(e,t){e._hasHelpOption&&t.find((t=>t===e._helpLongFlag||t===e._helpShortFlag))&&(e.outputHelp(),e._exit(0,"commander.helpDisplayed","(outputHelp)"))}function Y(e){return e.map((e=>{if(!e.startsWith("--inspect"))return e;let t,n,r="127.0.0.1",i="9229";return null!==(n=e.match(/^(--inspect(-brk)?)$/))?t=n[1]:null!==(n=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(t=n[1],/^\d+$/.test(n[3])?i=n[3]:r=n[3]):null!==(n=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(t=n[1],r=n[3],i=n[4]),t&&"0"!==i?`${t}=${r}:${parseInt(i)+1}`:e}))}function K(e){const t=[];for(let n=e;n;n=n.parent)t.push(n);return t}E.Command=class e extends j{constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:e=>F.stdout.write(e),writeErr:e=>F.stderr.write(e),getOutHelpWidth:()=>F.stdout.isTTY?F.stdout.columns:void 0,getErrHelpWidth:()=>F.stderr.isTTY?F.stderr.columns:void 0,outputError:(e,t)=>t(e)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._hasHelpOption=e._hasHelpOption,this._helpFlags=e._helpFlags,this._helpDescription=e._helpDescription,this._helpShortFlag=e._helpShortFlag,this._helpLongFlag=e._helpLongFlag,this._helpCommandName=e._helpCommandName,this._helpCommandnameAndArgs=e._helpCommandnameAndArgs,this._helpCommandDescription=e._helpCommandDescription,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}command(e,t,n){let r=t,i=n;"object"==typeof r&&null!==r&&(i=r,r=null),i=i||{};const[,o,s]=e.match(/([^ ]+) *(.*)/),a=this.createCommand(o);return r&&(a.description(r),a._executableHandler=!0),i.isDefault&&(this._defaultCommandName=a._name),a._hidden=!(!i.noHelp&&!i.hidden),a._executableFile=i.executableFile||null,s&&a.arguments(s),this.commands.push(a),a.parent=this,a.copyInheritedSettings(this),r?this:a}createCommand(t){return new e(t)}createHelp(){return Object.assign(new D,this.configureHelp())}configureHelp(e){return void 0===e?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return void 0===e?this._outputConfiguration:(Object.assign(this._outputConfiguration,e),this)}showHelpAfterError(e=!0){return"string"!=typeof e&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw new Error("Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()");return(t=t||{}).isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this.commands.push(e),e.parent=this,this}createArgument(e,t){return new V(e,t)}argument(e,t,n,r){const i=this.createArgument(e,t);return"function"==typeof n?i.default(r).argParser(n):i.default(n),this.addArgument(i),this}arguments(e){return e.split(/ +/).forEach((e=>{this.argument(e)})),this}addArgument(e){const t=this._args.slice(-1)[0];if(t&&t.variadic)throw new Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&void 0!==e.defaultValue&&void 0===e.parseArg)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this._args.push(e),this}addHelpCommand(e,t){return!1===e?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof e&&(this._helpCommandName=e.split(" ")[0],this._helpCommandnameAndArgs=e),this._helpCommandDescription=t||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(e,t){const n=["preSubcommand","preAction","postAction"];if(!n.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.\nExpecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return this._exitCallback=e||(e=>{if("commander.executeSubCommandAsync"!==e.code)throw e}),this}_exit(e,t,n){this._exitCallback&&this._exitCallback(new M(e,t,n)),F.exit(e)}action(e){return this._actionHandler=t=>{const n=this._args.length,r=t.slice(0,n);return this._storeOptionsAsProperties?r[n]=this:r[n]=this.opts(),r.push(this),e.apply(this,r)},this}createOption(e,t){return new B(e,t)}addOption(e){const t=e.name(),n=e.attributeName();if(e.negate){const t=e.long.replace(/^--no-/,"--");this._findOption(t)||this.setOptionValueWithSource(n,void 0===e.defaultValue||e.defaultValue,"default")}else void 0!==e.defaultValue&&this.setOptionValueWithSource(n,e.defaultValue,"default");this.options.push(e);const r=(t,r,i)=>{null==t&&void 0!==e.presetArg&&(t=e.presetArg);const o=this.getOptionValue(n);if(null!==t&&e.parseArg)try{t=e.parseArg(t,o)}catch(e){if("commander.invalidArgument"===e.code){const t=`${r} ${e.message}`;this.error(t,{exitCode:e.exitCode,code:e.code})}throw e}else null!==t&&e.variadic&&(t=e._concatValue(t,o));null==t&&(t=!e.negate&&(!(!e.isBoolean()&&!e.optional)||"")),this.setOptionValueWithSource(n,t,i)};return this.on("option:"+t,(t=>{const n=`error: option '${e.flags}' argument '${t}' is invalid.`;r(t,n,"cli")})),e.envVar&&this.on("optionEnv:"+t,(t=>{const n=`error: option '${e.flags}' value '${t}' from env '${e.envVar}' is invalid.`;r(t,n,"env")})),this}_optionEx(e,t,n,r,i){if("object"==typeof t&&t instanceof B)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const o=this.createOption(t,n);if(o.makeOptionMandatory(!!e.mandatory),"function"==typeof r)o.default(i).argParser(r);else if(r instanceof RegExp){const e=r;r=(t,n)=>{const r=e.exec(t);return r?r[0]:n},o.default(i).argParser(r)}else o.default(r);return this.addOption(o)}option(e,t,n,r){return this._optionEx({},e,t,n,r)}requiredOption(e,t,n,r){return this._optionEx({mandatory:!0},e,t,n,r)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){if(this._passThroughOptions=!!e,this.parent&&e&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(e=!0){if(this._storeOptionsAsProperties=!!e,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,void 0)}setOptionValueWithSource(e,t,n){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this._optionValueSources[e]=n,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;return K(this).forEach((n=>{void 0!==n.getOptionValueSource(e)&&(t=n.getOptionValueSource(e))})),t}_prepareUserArgs(e,t){if(void 0!==e&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");let n;switch(t=t||{},void 0===e&&(e=F.argv,F.versions&&F.versions.electron&&(t.from="electron")),this.rawArgs=e.slice(),t.from){case void 0:case"node":this._scriptPath=e[1],n=e.slice(2);break;case"electron":F.defaultApp?(this._scriptPath=e[1],n=e.slice(2)):n=e.slice(1);break;case"user":n=e.slice(0);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(e,t){const n=this._prepareUserArgs(e,t);return this._parseCommand([],n),this}async parseAsync(e,t){const n=this._prepareUserArgs(e,t);return await this._parseCommand([],n),this}_executeSubCommand(e,t){t=t.slice();let n=!1;const r=[".js",".ts",".tsx",".mjs",".cjs"];function i(e,t){const n=H.resolve(e,t);if(R.existsSync(n))return n;if(r.includes(H.extname(t)))return;const i=r.find((e=>R.existsSync(`${n}${e}`)));return i?`${n}${i}`:void 0}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let o,s=e._executableFile||`${this._name}-${e._name}`,a=this._executableDir||"";if(this._scriptPath){let e;try{e=R.realpathSync(this._scriptPath)}catch(t){e=this._scriptPath}a=H.resolve(H.dirname(e),a)}if(a){let t=i(a,s);if(!t&&!e._executableFile&&this._scriptPath){const n=H.basename(this._scriptPath,H.extname(this._scriptPath));n!==this._name&&(t=i(a,`${n}-${e._name}`))}s=t||s}if(n=r.includes(H.extname(s)),"win32"!==F.platform?n?(t.unshift(s),t=Y(F.execArgv).concat(t),o=N.spawn(F.argv[0],t,{stdio:"inherit"})):o=N.spawn(s,t,{stdio:"inherit"}):(t.unshift(s),t=Y(F.execArgv).concat(t),o=N.spawn(F.execPath,t,{stdio:"inherit"})),!o.killed){["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((e=>{F.on(e,(()=>{!1===o.killed&&null===o.exitCode&&o.kill(e)}))}))}const c=this._exitCallback;c?o.on("close",(()=>{c(new M(F.exitCode||0,"commander.executeSubCommandAsync","(close)"))})):o.on("close",F.exit.bind(F)),o.on("error",(t=>{if("ENOENT"===t.code){const t=a?`searched for local subcommand relative to directory '${a}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",n=`'${s}' does not exist\n - if '${e._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${t}`;throw new Error(n)}if("EACCES"===t.code)throw new Error(`'${s}' not executable`);if(c){const e=new M(1,"commander.executeSubCommandAsync","(error)");e.nestedError=t,c(e)}else F.exit(1)})),this.runningCommand=o}_dispatchSubcommand(e,t,n){const r=this._findCommand(e);let i;return r||this.help({error:!0}),i=this._chainOrCallSubCommandHook(i,r,"preSubcommand"),i=this._chainOrCall(i,(()=>{if(!r._executableHandler)return r._parseCommand(t,n);this._executeSubCommand(r,t.concat(n))})),i}_checkNumberOfArguments(){this._args.forEach(((e,t)=>{e.required&&null==this.args[t]&&this.missingArgument(e.name())})),this._args.length>0&&this._args[this._args.length-1].variadic||this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){const e=(e,t,n)=>{let r=t;if(null!==t&&e.parseArg)try{r=e.parseArg(t,n)}catch(n){if("commander.invalidArgument"===n.code){const r=`error: command-argument value '${t}' is invalid for argument '${e.name()}'. ${n.message}`;this.error(r,{exitCode:n.exitCode,code:n.code})}throw n}return r};this._checkNumberOfArguments();const t=[];this._args.forEach(((n,r)=>{let i=n.defaultValue;n.variadic?r<this.args.length?(i=this.args.slice(r),n.parseArg&&(i=i.reduce(((t,r)=>e(n,r,t)),n.defaultValue))):void 0===i&&(i=[]):r<this.args.length&&(i=this.args[r],n.parseArg&&(i=e(n,i,n.defaultValue))),t[r]=i})),this.processedArgs=t}_chainOrCall(e,t){return e&&e.then&&"function"==typeof e.then?e.then((()=>t())):t()}_chainOrCallHooks(e,t){let n=e;const r=[];return K(this).reverse().filter((e=>void 0!==e._lifeCycleHooks[t])).forEach((e=>{e._lifeCycleHooks[t].forEach((t=>{r.push({hookedCommand:e,callback:t})}))})),"postAction"===t&&r.reverse(),r.forEach((e=>{n=this._chainOrCall(n,(()=>e.callback(e.hookedCommand,this)))})),n}_chainOrCallSubCommandHook(e,t,n){let r=e;return void 0!==this._lifeCycleHooks[n]&&this._lifeCycleHooks[n].forEach((e=>{r=this._chainOrCall(r,(()=>e(this,t)))})),r}_parseCommand(e,t){const n=this.parseOptions(t);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(n.operands),t=n.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._hasImplicitHelpCommand()&&e[0]===this._helpCommandName)return 1===e.length&&this.help(),this._dispatchSubcommand(e[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return W(this,t),this._dispatchSubcommand(this._defaultCommandName,e,t);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),W(this,n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const r=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},i=`command:${this.name()}`;if(this._actionHandler){let n;return r(),this._processArguments(),n=this._chainOrCallHooks(n,"preAction"),n=this._chainOrCall(n,(()=>this._actionHandler(this.processedArgs))),this.parent&&(n=this._chainOrCall(n,(()=>{this.parent.emit(i,e,t)}))),n=this._chainOrCallHooks(n,"postAction"),n}if(this.parent&&this.parent.listenerCount(i))r(),this._processArguments(),this.parent.emit(i,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(r(),this._processArguments())}else this.commands.length?(r(),this.help({error:!0})):(r(),this._processArguments())}_findCommand(e){if(e)return this.commands.find((t=>t._name===e||t._aliases.includes(e)))}_findOption(e){return this.options.find((t=>t.is(e)))}_checkForMissingMandatoryOptions(){for(let e=this;e;e=e.parent)e.options.forEach((t=>{t.mandatory&&void 0===e.getOptionValue(t.attributeName())&&e.missingMandatoryOptionValue(t)}))}_checkForConflictingLocalOptions(){const e=this.options.filter((e=>{const t=e.attributeName();return void 0!==this.getOptionValue(t)&&"default"!==this.getOptionValueSource(t)})),t=e.filter((e=>e.conflictsWith.length>0));t.forEach((t=>{const n=e.find((e=>t.conflictsWith.includes(e.attributeName())));n&&this._conflictingOption(t,n)}))}_checkForConflictingOptions(){for(let e=this;e;e=e.parent)e._checkForConflictingLocalOptions()}parseOptions(e){const t=[],n=[];let r=t;const i=e.slice();function o(e){return e.length>1&&"-"===e[0]}let s=null;for(;i.length;){const e=i.shift();if("--"===e){r===n&&r.push(e),r.push(...i);break}if(!s||o(e)){if(s=null,o(e)){const t=this._findOption(e);if(t){if(t.required){const e=i.shift();void 0===e&&this.optionMissingArgument(t),this.emit(`option:${t.name()}`,e)}else if(t.optional){let e=null;i.length>0&&!o(i[0])&&(e=i.shift()),this.emit(`option:${t.name()}`,e)}else this.emit(`option:${t.name()}`);s=t.variadic?t:null;continue}}if(e.length>2&&"-"===e[0]&&"-"!==e[1]){const t=this._findOption(`-${e[1]}`);if(t){t.required||t.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${t.name()}`,e.slice(2)):(this.emit(`option:${t.name()}`),i.unshift(`-${e.slice(2)}`));continue}}if(/^--[^=]+=/.test(e)){const t=e.indexOf("="),n=this._findOption(e.slice(0,t));if(n&&(n.required||n.optional)){this.emit(`option:${n.name()}`,e.slice(t+1));continue}}if(o(e)&&(r=n),(this._enablePositionalOptions||this._passThroughOptions)&&0===t.length&&0===n.length){if(this._findCommand(e)){t.push(e),i.length>0&&n.push(...i);break}if(e===this._helpCommandName&&this._hasImplicitHelpCommand()){t.push(e),i.length>0&&t.push(...i);break}if(this._defaultCommandName){n.push(e),i.length>0&&n.push(...i);break}}if(this._passThroughOptions){r.push(e),i.length>0&&r.push(...i);break}r.push(e)}else this.emit(`option:${s.name()}`,e)}return{operands:t,unknown:n}}opts(){if(this._storeOptionsAsProperties){const e={},t=this.options.length;for(let n=0;n<t;n++){const t=this.options[n].attributeName();e[t]=t===this._versionOptionName?this._version:this[t]}return e}return this._optionValues}optsWithGlobals(){return K(this).reduce(((e,t)=>Object.assign(e,t.opts())),{})}error(e,t){this._outputConfiguration.outputError(`${e}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));const n=t||{},r=n.exitCode||1,i=n.code||"commander.error";this._exit(r,i,e)}_parseOptionsEnv(){this.options.forEach((e=>{if(e.envVar&&e.envVar in F.env){const t=e.attributeName();(void 0===this.getOptionValue(t)||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,F.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}}))}_parseOptionsImplied(){const e=new U(this.options),t=e=>void 0!==this.getOptionValue(e)&&!["default","implied"].includes(this.getOptionValueSource(e));this.options.filter((n=>void 0!==n.implied&&t(n.attributeName())&&e.valueFromOption(this.getOptionValue(n.attributeName()),n))).forEach((e=>{Object.keys(e.implied).filter((e=>!t(e))).forEach((t=>{this.setOptionValueWithSource(t,e.implied[t],"implied")}))}))}missingArgument(e){const t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){const t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){const t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){const n=e=>{const t=e.attributeName(),n=this.getOptionValue(t),r=this.options.find((e=>e.negate&&t===e.attributeName())),i=this.options.find((e=>!e.negate&&t===e.attributeName()));return r&&(void 0===r.presetArg&&!1===n||void 0!==r.presetArg&&n===r.presetArg)?r:i||e},r=e=>{const t=n(e),r=t.attributeName();return"env"===this.getOptionValueSource(r)?`environment variable '${t.envVar}'`:`option '${t.flags}'`},i=`error: ${r(e)} cannot be used with ${r(t)}`;this.error(i,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let n=[],r=this;do{const e=r.createHelp().visibleOptions(r).filter((e=>e.long)).map((e=>e.long));n=n.concat(e),r=r.parent}while(r&&!r._enablePositionalOptions);t=q(e,n)}const n=`error: unknown option '${e}'${t}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;const t=this._args.length,n=1===t?"":"s",r=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${t} argument${n} but got ${e.length}.`;this.error(r,{code:"commander.excessArguments"})}unknownCommand(){const e=this.args[0];let t="";if(this._showSuggestionAfterError){const n=[];this.createHelp().visibleCommands(this).forEach((e=>{n.push(e.name()),e.alias()&&n.push(e.alias())})),t=q(e,n)}const n=`error: unknown command '${e}'${t}`;this.error(n,{code:"commander.unknownCommand"})}version(e,t,n){if(void 0===e)return this._version;this._version=e,t=t||"-V, --version",n=n||"output the version number";const r=this.createOption(t,n);return this._versionOptionName=r.attributeName(),this.options.push(r),this.on("option:"+r.name(),(()=>{this._outputConfiguration.writeOut(`${e}\n`),this._exit(0,"commander.version",e)})),this}description(e,t){return void 0===e&&void 0===t?this._description:(this._description=e,t&&(this._argsDescription=t),this)}summary(e){return void 0===e?this._summary:(this._summary=e,this)}alias(e){if(void 0===e)return this._aliases[0];let t=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw new Error("Command alias can't be the same as its name");return t._aliases.push(e),this}aliases(e){return void 0===e?this._aliases:(e.forEach((e=>this.alias(e))),this)}usage(e){if(void 0===e){if(this._usage)return this._usage;const e=this._args.map((e=>G(e)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?e:[]).join(" ")}return this._usage=e,this}name(e){return void 0===e?this._name:(this._name=e,this)}nameFromFilename(e){return this._name=H.basename(e,H.extname(e)),this}executableDir(e){return void 0===e?this._executableDir:(this._executableDir=e,this)}helpInformation(e){const t=this.createHelp();return void 0===t.helpWidth&&(t.helpWidth=e&&e.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),t.formatHelp(this,t)}_getHelpContext(e){const t={error:!!(e=e||{}).error};let n;return n=t.error?e=>this._outputConfiguration.writeErr(e):e=>this._outputConfiguration.writeOut(e),t.write=e.write||n,t.command=this,t}outputHelp(e){let t;"function"==typeof e&&(t=e,e=void 0);const n=this._getHelpContext(e);K(this).reverse().forEach((e=>e.emit("beforeAllHelp",n))),this.emit("beforeHelp",n);let r=this.helpInformation(n);if(t&&(r=t(r),"string"!=typeof r&&!Buffer.isBuffer(r)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(r),this.emit(this._helpLongFlag),this.emit("afterHelp",n),K(this).forEach((e=>e.emit("afterAllHelp",n)))}helpOption(e,t){if("boolean"==typeof e)return this._hasHelpOption=e,this;this._helpFlags=e||this._helpFlags,this._helpDescription=t||this._helpDescription;const n=L(this._helpFlags);return this._helpShortFlag=n.shortFlag,this._helpLongFlag=n.longFlag,this}help(e){this.outputHelp(e);let t=F.exitCode||0;0===t&&e&&"function"!=typeof e&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){const n=["beforeAll","before","after","afterAll"];if(!n.includes(e))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${n.join("', '")}'`);const r=`${e}Help`;return this.on(r,(e=>{let n;n="function"==typeof t?t({error:e.error,command:e.command}):t,n&&e.write(`${n}\n`)})),this}},function(e,t){const{Argument:n}=y,{Command:r}=E,{CommanderError:i,InvalidArgumentError:o}=w,{Help:s}=A,{Option:a}=$;(t=e.exports=new r).program=t,t.Argument=n,t.Command=r,t.CommanderError=i,t.Help=s,t.InvalidArgumentError=o,t.InvalidOptionArgumentError=o,t.Option=a}(O,O.exports);var X=v(O.exports);const{program:J,createCommand:z,createArgument:Z,createOption:Q,CommanderError:ee,InvalidArgumentError:te,InvalidOptionArgumentError:ne,Command:re,Argument:ie,Option:oe,Help:se}=X;function ae(e){return Array.isArray(e)?e:[e]}const ce=/^\s+$/,le=/(?:[^\\]|^)\\$/,ue=/^\\!/,pe=/^\\#/,he=/\r?\n/g,de=/^\.*\/|^\.+$/;let me="node-ignore";"undefined"!=typeof Symbol&&(me=Symbol.for("node-ignore"));const fe=me,ge=/([0-z])-([0-z])/g,be=()=>!1,_e=[[/\\?\s+$/,e=>0===e.indexOf("\\")?" ":""],[/\\\s/g,()=>" "],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,n)=>t+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,n)=>t+n.replace(/\\\*/g,"[^\\/]*")],[/\\\\\\(?=[$.|*+(){^])/g,()=>"\\"],[/\\\\/g,()=>"\\"],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,n,r,i)=>"\\"===t?`\\[${n}${(e=>{const{length:t}=e;return e.slice(0,t-t%2)})(r)}${i}`:"]"===i&&r.length%2==0?`[${(e=>e.replace(ge,((e,t,n)=>t.charCodeAt(0)<=n.charCodeAt(0)?e:"")))(n)}${r}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],ve=Object.create(null),Oe=e=>"string"==typeof e;class ye{constructor(e,t,n,r){this.origin=e,this.pattern=t,this.negative=n,this.regex=r}}const we=(e,t)=>{const n=e;let r=!1;0===e.indexOf("!")&&(r=!0,e=e.substr(1));const i=((e,t)=>{let n=ve[e];return n||(n=_e.reduce(((t,n)=>t.replace(n[0],n[1].bind(e))),e),ve[e]=n),t?new RegExp(n,"i"):new RegExp(n)})(e=e.replace(ue,"!").replace(pe,"#"),t);return new ye(n,e,r,i)},xe=(e,t)=>{throw new t(e)},Ce=(e,t,n)=>{if(!Oe(e))return n(`path must be a string, but got \`${t}\``,TypeError);if(!e)return n("path must not be empty",TypeError);if(Ce.isNotRelative(e)){return n(`path should be a ${"`path.relative()`d"} string, but got "${t}"`,RangeError)}return!0},Ee=e=>de.test(e);Ce.isNotRelative=Ee,Ce.convert=e=>e;class Ae{constructor({ignorecase:e=!0,ignoreCase:t=e,allowRelativePaths:n=!1}={}){var r,i,o;r=this,i=fe,o=!0,Object.defineProperty(r,i,{value:o}),this._rules=[],this._ignoreCase=t,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[fe])return this._rules=this._rules.concat(e._rules),void(this._added=!0);if((e=>e&&Oe(e)&&!ce.test(e)&&!le.test(e)&&0!==e.indexOf("#"))(e)){const t=we(e,this._ignoreCase);this._added=!0,this._rules.push(t)}}add(e){return this._added=!1,ae(Oe(e)?(e=>e.split(he))(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,t){let n=!1,r=!1;return this._rules.forEach((i=>{const{negative:o}=i;if(r===o&&n!==r||o&&!n&&!r&&!t)return;i.regex.test(e)&&(n=!o,r=o)})),{ignored:n,unignored:r}}_test(e,t,n,r){const i=e&&Ce.convert(e);return Ce(i,e,this._allowRelativePaths?be:xe),this._t(i,t,n,r)}_t(e,t,n,r){if(e in t)return t[e];if(r||(r=e.split("/")),r.pop(),!r.length)return t[e]=this._testOne(e,n);const i=this._t(r.join("/")+"/",t,n,r);return t[e]=i.ignored?i:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return ae(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const Se=e=>new Ae(e);Se.isPathValid=e=>Ce(e&&Ce.convert(e),e,be),Se.default=Se;var $e=Se;if("undefined"!=typeof process&&(process.env&&process.env.IGNORE_TEST_WIN32||"win32"===process.platform)){const e=e=>/^\\\\\?\\/.test(e)||/["<>|\u0000-\u001F]+/u.test(e)?e:e.replace(/\\/g,"/");Ce.convert=e;const t=/^[a-z]:\//i;Ce.isNotRelative=e=>t.test(e)||Ee(e)}var Te,Ie,Pe,ke,je,Ne=v($e),He={exports:{}};je="win32"===process.platform||_.TESTING_WINDOWS?function(){if(Ie)return Te;Ie=1,Te=n,n.sync=function(n,r){return t(e.statSync(n),n,r)};var e=o;function t(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}(t,n)}function n(n,r,i){e.stat(n,(function(e,o){i(e,!e&&t(o,n,r))}))}return Te}():function(){if(ke)return Pe;ke=1,Pe=t,t.sync=function(t,r){return n(e.statSync(t),r)};var e=o;function t(t,r,i){e.stat(t,(function(e,t){i(e,!e&&n(t,r))}))}function n(e,t){return e.isFile()&&function(e,t){var n=e.mode,r=e.uid,i=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8);return n&parseInt("001",8)||n&c&&i===s||n&a&&r===o||n&(a|c)&&0===o}(e,t)}return Pe}();var Re=Fe;function Fe(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(n,r){Fe(e,t||{},(function(e,t){e?r(e):n(t)}))}))}je(e,t||{},(function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),n(e,r)}))}Fe.sync=function(e,t){try{return je.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}};const Ve="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,Ge=i,Me=Ve?";":":",De=Re,Be=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Le=(e,t)=>{const n=t.colon||Me,r=e.match(/\//)||Ve&&e.match(/\\/)?[""]:[...Ve?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],i=Ve?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Ve?i.split(n):[""];return Ve&&-1!==e.indexOf(".")&&""!==o[0]&&o.unshift(""),{pathEnv:r,pathExt:o,pathExtExe:i}},Ue=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),t||(t={});const{pathEnv:r,pathExt:i,pathExtExe:o}=Le(e,t),s=[],a=n=>new Promise(((i,o)=>{if(n===r.length)return t.all&&s.length?i(s):o(Be(e));const a=r[n],l=/^".*"$/.test(a)?a.slice(1,-1):a,u=Ge.join(l,e),p=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;i(c(p,n,0))})),c=(e,n,r)=>new Promise(((l,u)=>{if(r===i.length)return l(a(n+1));const p=i[r];De(e+p,{pathExt:o},((i,o)=>{if(!i&&o){if(!t.all)return l(e+p);s.push(e+p)}return l(c(e,n,r+1))}))}));return n?a(0).then((e=>n(null,e)),n):a(0)};var qe=Ue;Ue.sync=(e,t)=>{t=t||{};const{pathEnv:n,pathExt:r,pathExtExe:i}=Le(e,t),o=[];for(let s=0;s<n.length;s++){const a=n[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,l=Ge.join(c,e),u=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let e=0;e<r.length;e++){const n=u+r[e];try{if(De.sync(n,{pathExt:i})){if(!t.all)return n;o.push(n)}}catch(e){}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw Be(e)};var We={exports:{}};const Ye=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find((e=>"PATH"===e.toUpperCase()))||"Path"};We.exports=Ye,We.exports.default=Ye;var Ke=We.exports;const Xe=i,Je=qe,ze=Ke;function Ze(e,t){const n=e.options.env||process.env,r=process.cwd(),i=null!=e.options.cwd,o=i&&void 0!==process.chdir&&!process.chdir.disabled;if(o)try{process.chdir(e.options.cwd)}catch(e){}let s;try{s=Je.sync(e.command,{path:n[ze({env:n})],pathExt:t?Xe.delimiter:void 0})}catch(e){}finally{o&&process.chdir(r)}return s&&(s=Xe.resolve(i?e.options.cwd:"",s)),s}var Qe=function(e){return Ze(e)||Ze(e,!0)},et={};const tt=/([()\][%!^"`<>&|;, *?])/g;et.command=function(e){return e=e.replace(tt,"^$1")},et.argument=function(e,t){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(tt,"^$1"),t&&(e=e.replace(tt,"^$1")),e};const nt=/^#!(.*)/;const rt=o,it=(e="")=>{const t=e.match(nt);if(!t)return null;const[n,r]=t[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return"env"===i?r:r?`${i} ${r}`:i};var ot=function(e){const t=Buffer.alloc(150);let n;try{n=rt.openSync(e,"r"),rt.readSync(n,t,0,150,0),rt.closeSync(n)}catch(e){}return it(t.toString())};const st=i,at=Qe,ct=et,lt=ot,ut="win32"===process.platform,pt=/\.(?:com|exe)$/i,ht=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function dt(e){if(!ut)return e;const t=function(e){e.file=at(e);const t=e.file&&lt(e.file);return t?(e.args.unshift(e.file),e.command=t,at(e)):e.file}(e),n=!pt.test(t);if(e.options.forceShell||n){const n=ht.test(t);e.command=st.normalize(e.command),e.command=ct.command(e.command),e.args=e.args.map((e=>ct.argument(e,n)));const r=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${r}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}var mt=function(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null);const r={command:e,args:t=t?t.slice(0):[],options:n=Object.assign({},n),file:void 0,original:{command:e,args:t}};return n.shell?r:dt(r)};const ft="win32"===process.platform;function gt(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function bt(e,t){return ft&&1===e&&!t.file?gt(t.original,"spawn"):null}var _t={hookChildProcess:function(e,t){if(!ft)return;const n=e.emit;e.emit=function(r,i){if("exit"===r){const r=bt(i,t);if(r)return n.call(e,"error",r)}return n.apply(e,arguments)}},verifyENOENT:bt,verifyENOENTSync:function(e,t){return ft&&1===e&&!t.file?gt(t.original,"spawnSync"):null},notFoundError:gt};const vt=r,Ot=mt,yt=_t;function wt(e,t,n){const r=Ot(e,t,n),i=vt.spawn(r.command,r.args,r.options);return yt.hookChildProcess(i,r),i}He.exports=wt,He.exports.spawn=wt,He.exports.sync=function(e,t,n){const r=Ot(e,t,n),i=vt.spawnSync(r.command,r.args,r.options);return i.error=i.error||yt.verifyENOENTSync(i.status,r),i},He.exports._parse=Ot,He.exports._enoent=yt;var xt=v(He.exports);function Ct(e={}){const{env:t=process.env,platform:n=process.platform}=e;return"win32"!==n?"PATH":Object.keys(t).reverse().find((e=>"PATH"===e.toUpperCase()))||"Path"}function Et({env:e=l.env,...n}={}){const r=Ct({env:e={...e}});return n.path=e[r],e[r]=function(e={}){const{cwd:n=l.cwd(),path:r=l.env[Ct()],execPath:i=l.execPath}=e;let o;const s=n instanceof URL?u.fileURLToPath(n):n;let a=t.resolve(s);const c=[];for(;o!==a;)c.push(t.join(a,"node_modules/.bin")),o=a,a=t.resolve(a,"..");return c.push(t.resolve(s,i,"..")),[...c,r].join(t.delimiter)}(n),e}const At=(e,t,n,r)=>{if("length"===n||"prototype"===n)return;if("arguments"===n||"caller"===n)return;const i=Object.getOwnPropertyDescriptor(e,n),o=Object.getOwnPropertyDescriptor(t,n);!St(i,o)&&r||Object.defineProperty(e,n,o)},St=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},$t=(e,t)=>`/* Wrapped ${e}*/\n${t}`,Tt=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),It=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");function Pt(e,t,{ignoreNonConfigurable:n=!1}={}){const{name:r}=e;for(const r of Reflect.ownKeys(t))At(e,t,r,n);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,t),((e,t,n)=>{const r=""===n?"":`with ${n.trim()}() `,i=$t.bind(null,r,t.toString());Object.defineProperty(i,"name",It),Object.defineProperty(e,"toString",{...Tt,value:i})})(e,t,r),e}const kt=new WeakMap,jt=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let n,r=0;const i=e.displayName||e.name||"<anonymous>",o=function(...s){if(kt.set(o,++r),1===r)n=e.apply(this,s),e=null;else if(!0===t.throw)throw new Error(`Function \`${i}\` can only be called once`);return n};return Pt(o,e),kt.set(o,r),o};jt.callCount=e=>{if(!kt.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return kt.get(e)};const Nt=(e,t)=>({name:`SIGRT${t+1}`,number:Ht+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),Ht=34,Rt=64,Ft=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}],Vt=()=>{const e=(()=>{const e=Rt-Ht+1;return Array.from({length:e},Nt)})();return[...Ft,...e].map(Gt)},Gt=({name:e,number:t,description:n,action:r,forced:i=!1,standard:o})=>{const{signals:{[e]:s}}=p.constants,a=void 0!==s;return{name:e,number:a?s:t,description:n,supported:a,action:r,forced:i,standard:o}},Mt=({name:e,number:t,description:n,supported:r,action:i,forced:o,standard:s})=>[e,{name:e,number:t,description:n,supported:r,action:i,forced:o,standard:s}],Dt=(()=>{const e=Vt();return Object.fromEntries(e.map(Mt))})(),Bt=(e,t)=>{const n=Lt(e,t);if(void 0===n)return{};const{name:r,description:i,supported:o,action:s,forced:a,standard:c}=n;return{[e]:{name:r,number:e,description:i,supported:o,action:s,forced:a,standard:c}}},Lt=(e,t)=>{const n=t.find((({name:t})=>p.constants.signals[t]===e));return void 0!==n?n:t.find((t=>t.number===e))};(()=>{const e=Vt(),t=Rt+1,n=Array.from({length:t},((t,n)=>Bt(n,e)));Object.assign({},...n)})();const Ut=({stdout:e,stderr:t,all:n,error:r,signal:i,exitCode:o,command:s,escapedCommand:a,timedOut:c,isCanceled:l,killed:u,parsed:{options:{timeout:p}}})=>{o=null===o?void 0:o;const h=void 0===(i=null===i?void 0:i)?void 0:Dt[i].description,d=(({timedOut:e,timeout:t,errorCode:n,signal:r,signalDescription:i,exitCode:o,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":void 0!==n?`failed with ${n}`:void 0!==r?`was killed with ${r} (${i})`:void 0!==o?`failed with exit code ${o}`:"failed")({timedOut:c,timeout:p,errorCode:r&&r.code,signal:i,signalDescription:h,exitCode:o,isCanceled:l}),m=`Command ${d}: ${s}`,f="[object Error]"===Object.prototype.toString.call(r),g=f?`${m}\n${r.message}`:m,b=[g,t,e].filter(Boolean).join("\n");return f?(r.originalMessage=r.message,r.message=b):r=new Error(b),r.shortMessage=g,r.command=s,r.escapedCommand=a,r.exitCode=o,r.signal=i,r.signalDescription=h,r.stdout=e,r.stderr=t,void 0!==n&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=Boolean(c),r.isCanceled=l,r.killed=u&&!c,r},qt=["stdin","stdout","stderr"],Wt=e=>{if(!e)return;const{stdio:t}=e;if(void 0===t)return qt.map((t=>e[t]));if((e=>qt.some((t=>void 0!==e[t])))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${qt.map((e=>`\`${e}\``)).join(", ")}`);if("string"==typeof t)return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const n=Math.max(t.length,qt.length);return Array.from({length:n},((e,n)=>t[n]))};var Yt,Kt={exports:{}},Xt={exports:{}};var Jt=_.process;const zt=function(e){return e&&"object"==typeof e&&"function"==typeof e.removeListener&&"function"==typeof e.emit&&"function"==typeof e.reallyExit&&"function"==typeof e.listeners&&"function"==typeof e.kill&&"number"==typeof e.pid&&"function"==typeof e.on};if(zt(Jt)){var Zt,Qt=h,en=(Yt||(Yt=1,(dn=Xt).exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&dn.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&dn.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")),Xt.exports),tn=/^win/i.test(Jt.platform),nn=n;"function"!=typeof nn&&(nn=nn.EventEmitter),Jt.__signal_exit_emitter__?Zt=Jt.__signal_exit_emitter__:((Zt=Jt.__signal_exit_emitter__=new nn).count=0,Zt.emitted={}),Zt.infinite||(Zt.setMaxListeners(1/0),Zt.infinite=!0),Kt.exports=function(e,t){if(!zt(_.process))return function(){};Qt.equal(typeof e,"function","a callback must be provided for exit handler"),!1===an&&cn();var n="exit";t&&t.alwaysLast&&(n="afterexit");return Zt.on(n,e),function(){Zt.removeListener(n,e),0===Zt.listeners("exit").length&&0===Zt.listeners("afterexit").length&&rn()}};var rn=function(){an&&zt(_.process)&&(an=!1,en.forEach((function(e){try{Jt.removeListener(e,sn[e])}catch(e){}})),Jt.emit=pn,Jt.reallyExit=ln,Zt.count-=1)};Kt.exports.unload=rn;var on=function(e,t,n){Zt.emitted[e]||(Zt.emitted[e]=!0,Zt.emit(e,t,n))},sn={};en.forEach((function(e){sn[e]=function(){zt(_.process)&&(Jt.listeners(e).length===Zt.count&&(rn(),on("exit",null,e),on("afterexit",null,e),tn&&"SIGHUP"===e&&(e="SIGINT"),Jt.kill(Jt.pid,e)))}})),Kt.exports.signals=function(){return en};var an=!1,cn=function(){!an&&zt(_.process)&&(an=!0,Zt.count+=1,en=en.filter((function(e){try{return Jt.on(e,sn[e]),!0}catch(e){return!1}})),Jt.emit=hn,Jt.reallyExit=un)};Kt.exports.load=cn;var ln=Jt.reallyExit,un=function(e){zt(_.process)&&(Jt.exitCode=e||0,on("exit",Jt.exitCode,null),on("afterexit",Jt.exitCode,null),ln.call(Jt,Jt.exitCode))},pn=Jt.emit,hn=function(e,t){if("exit"===e&&zt(_.process)){void 0!==t&&(Jt.exitCode=t);var n=pn.apply(this,arguments);return on("exit",Jt.exitCode,null),on("afterexit",Jt.exitCode,null),n}return pn.apply(this,arguments)}}else Kt.exports=function(){return function(){}};var dn,mn=v(Kt.exports);const fn=(e,t="SIGTERM",n={})=>{const r=e(t);return gn(e,t,n,r),r},gn=(e,t,n,r)=>{if(!bn(t,n,r))return;const i=vn(n),o=setTimeout((()=>{e("SIGKILL")}),i);o.unref&&o.unref()},bn=(e,{forceKillAfterTimeout:t},n)=>_n(e)&&!1!==t&&n,_n=e=>e===p.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),vn=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},On=(e,t)=>{e.kill()&&(t.isCanceled=!0)},yn=(e,{timeout:t,killSignal:n="SIGTERM"},r)=>{if(0===t||void 0===t)return r;let i;const o=new Promise(((r,o)=>{i=setTimeout((()=>{((e,t,n)=>{e.kill(t),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))})(e,n,o)}),t)})),s=r.finally((()=>{clearTimeout(i)}));return Promise.race([o,s])};function wn(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe}function xn(e){return wn(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState}const Cn=(t,n,r)=>{if("string"==typeof r)return t[n].pipe(e.createWriteStream(r)),t;if(xn(r))return t[n].pipe(r),t;if(!(e=>e instanceof c.ChildProcess&&"function"==typeof e.then)(r))throw new TypeError("The second argument must be a string, a stream or an Execa child process.");if(!xn(r.stdin))throw new TypeError("The target child process's stdin must be available.");return t[n].pipe(r.stdin),r};var En={exports:{}};const{PassThrough:An}=m;const{constants:Sn}=d,$n=m,{promisify:Tn}=f,In=e=>{e={...e};const{array:t}=e;let{encoding:n}=e;const r="buffer"===n;let i=!1;t?i=!(n||r):n=n||"utf8",r&&(n=null);const o=new An({objectMode:i});n&&o.setEncoding(n);let s=0;const a=[];return o.on("data",(e=>{a.push(e),i?s=a.length:s+=e.length})),o.getBufferedValue=()=>t?a:r?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o},Pn=Tn($n.pipeline);class kn extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function jn(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:n}=t,r=In(t);return await new Promise(((t,i)=>{const o=e=>{e&&r.getBufferedLength()<=Sn.MAX_LENGTH&&(e.bufferedData=r.getBufferedValue()),i(e)};(async()=>{try{await Pn(e,r),t()}catch(e){o(e)}})(),r.on("data",(()=>{r.getBufferedLength()>n&&o(new kn)}))})),r.getBufferedValue()}En.exports=jn,En.exports.buffer=(e,t)=>jn(e,{...t,encoding:"buffer"}),En.exports.array=(e,t)=>jn(e,{...t,array:!0}),En.exports.MaxBufferError=kn;var Nn=v(En.exports);const{PassThrough:Hn}=m;var Rn=function(){var e=[],t=new Hn({objectMode:!0});return t.setMaxListeners(0),t.add=n,t.isEmpty=function(){return 0==e.length},t.on("unpipe",r),Array.prototype.slice.call(arguments).forEach(n),t;function n(i){return Array.isArray(i)?(i.forEach(n),this):(e.push(i),i.once("end",r.bind(null,i)),i.once("error",t.emit.bind(t,"error")),i.pipe(t,{end:!1}),this)}function r(n){!(e=e.filter((function(e){return e!==n}))).length&&t.readable&&t.end()}},Fn=v(Rn);const Vn=({input:t,inputFile:n})=>"string"!=typeof n?t:((e=>{if(void 0!==e)throw new TypeError("The `input` and `inputFile` options cannot be both set.")})(t),e.createReadStream(n)),Gn=async(e,t)=>{if(e&&void 0!==t){e.destroy();try{return await t}catch(e){return e.bufferedData}}},Mn=(e,{encoding:t,buffer:n,maxBuffer:r})=>{if(e&&n)return t?Nn(e,{encoding:t,maxBuffer:r}):Nn.buffer(e,{maxBuffer:r})},Dn=(async()=>{})().constructor.prototype,Bn=["then","catch","finally"].map((e=>[e,Reflect.getOwnPropertyDescriptor(Dn,e)])),Ln=(e,t)=>{for(const[n,r]of Bn){const i="function"==typeof t?(...e)=>Reflect.apply(r.value,t(),e):r.value.bind(t);Reflect.defineProperty(e,n,{...r,value:i})}},Un=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],qn=/^[\w.-]+$/,Wn=/"/g,Yn=(e,t)=>Un(e,t).map((e=>(e=>"string"!=typeof e||qn.test(e)?e:`"${e.replace(Wn,'\\"')}"`)(e))).join(" "),Kn=g.debuglog("execa").enabled,Xn=(e,t)=>String(e).padStart(t,"0"),Jn=(e,{verbose:t})=>{t&&l.stderr.write(`[${(()=>{const e=new Date;return`${Xn(e.getHours(),2)}:${Xn(e.getMinutes(),2)}:${Xn(e.getSeconds(),2)}.${Xn(e.getMilliseconds(),3)}`})()}] ${e}\n`)},zn=(e,n,r={})=>{const i=xt._parse(e,n,r);return e=i.command,n=i.args,(r={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(r=i.options).cwd||l.cwd(),execPath:l.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,verbose:Kn,...r}).env=(({env:e,extendEnv:t,preferLocal:n,localDir:r,execPath:i})=>{const o=t?{...l.env,...e}:e;return n?Et({env:o,cwd:r,execPath:i}):o})(r),r.stdio=Wt(r),"win32"===l.platform&&"cmd"===t.basename(e,".exe")&&n.unshift("/q"),{file:e,args:n,options:r,parsed:i}},Zn=(e,t,n)=>"string"==typeof t||a.Buffer.isBuffer(t)?e.stripFinalNewline?function(e){const t="string"==typeof e?"\n":"\n".charCodeAt(),n="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===n&&(e=e.slice(0,-1)),e}(t):t:void 0===n?void 0:"";function Qn(e,t,n){const r=zn(e,t,n),i=((e,t)=>Un(e,t).join(" "))(e,t),o=Yn(e,t);let s;Jn(o,r.options),(({timeout:e})=>{if(void 0!==e&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)})(r.options);try{s=c.spawn(r.file,r.args,r.options)}catch(e){const t=new c.ChildProcess,n=Promise.reject(Ut({error:e,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return Ln(t,n),t}const a=(e=>new Promise(((t,n)=>{e.on("exit",((e,n)=>{t({exitCode:e,signal:n})})),e.on("error",(e=>{n(e)})),e.stdin&&e.stdin.on("error",(e=>{n(e)}))})))(s),l=yn(s,r.options,a),u=(async(e,{cleanup:t,detached:n},r)=>{if(!t||n)return r;const i=mn((()=>{e.kill()}));return r.finally((()=>{i()}))})(s,r.options,l);s.kill=fn.bind(null,s.kill.bind(s)),s.cancel=On.bind(null,s,{isCanceled:!1});const p=jt((async()=>{const[{error:e,exitCode:t,signal:n,timedOut:a},c,l,p]=await(async({stdout:e,stderr:t,all:n},{encoding:r,buffer:i,maxBuffer:o},s)=>{const a=Mn(e,{encoding:r,buffer:i,maxBuffer:o}),c=Mn(t,{encoding:r,buffer:i,maxBuffer:o}),l=Mn(n,{encoding:r,buffer:i,maxBuffer:2*o});try{return await Promise.all([s,a,c,l])}catch(r){return Promise.all([{error:r,signal:r.signal,timedOut:r.timedOut},Gn(e,a),Gn(t,c),Gn(n,l)])}})(s,r.options,u),h=Zn(r.options,c),d=Zn(r.options,l),m=Zn(r.options,p);if(e||0!==t||null!==n){const c=Ut({error:e,exitCode:t,signal:n,stdout:h,stderr:d,all:m,command:i,escapedCommand:o,parsed:r,timedOut:a,isCanceled:!!r.options.signal&&r.options.signal.aborted,killed:s.killed});if(!r.options.reject)return c;throw c}return{command:i,escapedCommand:o,exitCode:0,stdout:h,stderr:d,all:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return((e,t)=>{const n=Vn(t);void 0!==n&&(wn(n)?n.pipe(e.stdin):e.stdin.end(n))})(s,r.options),s.all=((e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const n=Fn();return e.stdout&&n.add(e.stdout),e.stderr&&n.add(e.stderr),n})(s,r.options),(e=>{null!==e.stdout&&(e.pipeStdout=Cn.bind(void 0,e,"stdout")),null!==e.stderr&&(e.pipeStderr=Cn.bind(void 0,e,"stderr")),void 0!==e.all&&(e.pipeAll=Cn.bind(void 0,e,"all"))})(s),Ln(s,p),s}var er={};function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(er,"__esModule",{value:!0});var ir=l,or=p,sr=b;const ar=(e=0)=>t=>`[${t+e}m`,cr=(e=0)=>t=>`[${38+e};5;${t}m`,lr=(e=0)=>(t,n,r)=>`[${38+e};2;${t};${n};${r}m`,ur={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},pr=Object.keys(ur.modifier),hr=Object.keys(ur.color),dr=Object.keys(ur.bgColor),mr=[...hr,...dr];const fr=function(){const e=new Map;for(const[t,n]of Object.entries(ur)){for(const[t,r]of Object.entries(n))ur[t]={open:`[${r[0]}m`,close:`[${r[1]}m`},n[t]=ur[t],e.set(r[0],r[1]);Object.defineProperty(ur,t,{value:n,enumerable:!1})}return Object.defineProperty(ur,"codes",{value:e,enumerable:!1}),ur.color.close="[39m",ur.bgColor.close="[49m",ur.color.ansi=ar(),ur.color.ansi256=cr(),ur.color.ansi16m=lr(),ur.bgColor.ansi=ar(10),ur.bgColor.ansi256=cr(10),ur.bgColor.ansi16m=lr(10),Object.defineProperties(ur,{rgbToAnsi256:{value:(e,t,n)=>e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value(e){const t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[n]=t;3===n.length&&(n=[...n].map((e=>e+e)).join(""));const r=Number.parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>ur.rgbToAnsi256(...ur.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return e-8+90;let t,n,r;if(e>=232)t=(10*(e-232)+8)/255,n=t,r=t;else{const i=(e-=16)%36;t=Math.floor(e/36)/5,n=Math.floor(i/6)/5,r=i%6/5}const i=2*Math.max(t,n,r);if(0===i)return 30;let o=30+(Math.round(r)<<2|Math.round(n)<<1|Math.round(t));return 2===i&&(o+=60),o},enumerable:!1},rgbToAnsi:{value:(e,t,n)=>ur.ansi256ToAnsi(ur.rgbToAnsi256(e,t,n)),enumerable:!1},hexToAnsi:{value:e=>ur.ansi256ToAnsi(ur.hexToAnsi256(e)),enumerable:!1}}),ur}();function gr(e,t=(globalThis.Deno?globalThis.Deno.args:ir.argv)){const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}const{env:br}=ir;let _r;function vr(e,{streamIsTTY:t,sniffFlags:n=!0}={}){const r=function(){if("FORCE_COLOR"in br)return"true"===br.FORCE_COLOR?1:"false"===br.FORCE_COLOR?0:0===br.FORCE_COLOR.length?1:Math.min(Number.parseInt(br.FORCE_COLOR,10),3)}();void 0!==r&&(_r=r);const i=n?_r:r;if(0===i)return 0;if(n){if(gr("color=16m")||gr("color=full")||gr("color=truecolor"))return 3;if(gr("color=256"))return 2}if("TF_BUILD"in br&&"AGENT_NAME"in br)return 1;if(e&&!t&&void 0===i)return 0;const o=i||0;if("dumb"===br.TERM)return o;if("win32"===ir.platform){const e=or.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in br)return"GITHUB_ACTIONS"in br?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((e=>e in br))||"codeship"===br.CI_NAME?1:o;if("TEAMCITY_VERSION"in br)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(br.TEAMCITY_VERSION)?1:0;if("truecolor"===br.COLORTERM)return 3;if("xterm-kitty"===br.TERM)return 3;if("TERM_PROGRAM"in br){const e=Number.parseInt((br.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(br.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(br.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(br.TERM)||"COLORTERM"in br?1:o}function Or(e,t={}){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(vr(e,nr({streamIsTTY:e&&e.isTTY},t)))}gr("no-color")||gr("no-colors")||gr("color=false")||gr("color=never")?_r=0:(gr("color")||gr("colors")||gr("color=true")||gr("color=always"))&&(_r=1);const yr={stdout:Or({isTTY:sr.isatty(1)}),stderr:Or({isTTY:sr.isatty(2)})};function wr(e,t,n){let r=e.indexOf(t);if(-1===r)return e;const i=t.length;let o=0,s="";do{s+=e.slice(o,r)+t+n,o=r+i,r=e.indexOf(t,o)}while(-1!==r);return s+=e.slice(o),s}const{stdout:xr,stderr:Cr}=yr,Er=Symbol("GENERATOR"),Ar=Symbol("STYLER"),Sr=Symbol("IS_EMPTY"),$r=["ansi","ansi","ansi256","ansi16m"],Tr=Object.create(null);const Ir=e=>{const t=(...e)=>e.join(" ");return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=xr?xr.level:0;e.level=void 0===t.level?n:t.level})(t,e),Object.setPrototypeOf(t,Pr.prototype),t};function Pr(e){return Ir(e)}Object.setPrototypeOf(Pr.prototype,Function.prototype);for(const[e,t]of Object.entries(fr))Tr[e]={get(){const n=Rr(this,Hr(t.open,t.close,this[Ar]),this[Sr]);return Object.defineProperty(this,e,{value:n}),n}};Tr.visible={get(){const e=Rr(this,this[Ar],!0);return Object.defineProperty(this,"visible",{value:e}),e}};const kr=(e,t,n,...r)=>"rgb"===e?"ansi16m"===t?fr[n].ansi16m(...r):"ansi256"===t?fr[n].ansi256(fr.rgbToAnsi256(...r)):fr[n].ansi(fr.rgbToAnsi(...r)):"hex"===e?kr("rgb",t,n,...fr.hexToRgb(...r)):fr[n][e](...r),jr=["rgb","hex","ansi256"];for(const e of jr){Tr[e]={get(){const{level:t}=this;return function(...n){const r=Hr(kr(e,$r[t],"color",...n),fr.color.close,this[Ar]);return Rr(this,r,this[Sr])}}};Tr["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const{level:t}=this;return function(...n){const r=Hr(kr(e,$r[t],"bgColor",...n),fr.bgColor.close,this[Ar]);return Rr(this,r,this[Sr])}}}}const Nr=Object.defineProperties((()=>{}),nr(nr({},Tr),{},{level:{enumerable:!0,get(){return this[Er].level},set(e){this[Er].level=e}}})),Hr=(e,t,n)=>{let r,i;return void 0===n?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},Rr=(e,t,n)=>{const r=(...e)=>Fr(r,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(r,Nr),r[Er]=e,r[Ar]=t,r[Sr]=n,r},Fr=(e,t)=>{if(e.level<=0||!t)return e[Sr]?"":t;let n=e[Ar];if(void 0===n)return t;const{openAll:r,closeAll:i}=n;if(t.includes(""))for(;void 0!==n;)t=wr(t,n.close,n.open),n=n.parent;const o=t.indexOf("\n");return-1!==o&&(t=function(e,t,n,r){let i=0,o="";do{const s="\r"===e[r-1];o+=e.slice(i,s?r-1:r)+t+(s?"\r\n":"\n")+n,i=r+1,r=e.indexOf("\n",i)}while(-1!==r);return o+=e.slice(i),o}(t,i,r,o)),r+t+i};Object.defineProperties(Pr.prototype,Tr);const Vr=Pr(),Gr=Pr({level:Cr?Cr.level:0});er.Chalk=class{constructor(e){return Ir(e)}},er.backgroundColorNames=dr,er.backgroundColors=dr,er.chalkStderr=Gr,er.colorNames=mr,er.colors=mr;var Mr=er.default=Vr;er.foregroundColorNames=hr,er.foregroundColors=hr,er.modifierNames=pr,er.modifiers=pr,er.supportsColor=xr,er.supportsColorStderr=Cr;var Dr={error:function(...e){console.log(Mr.redBright(...e))},warn:function(...e){console.log(Mr.yellowBright(...e))},info:function(...e){console.log(Mr.blueBright(...e))},success:function(...e){console.log(Mr.greenBright(...e))},log:function(...e){console.log(...e)},path:function(...e){console.log(Mr.gray(...e))}};const Br=e=>Dr.success(`\n${e}`),Lr=(e,t,n={})=>{try{return Qn(e,t,{stdio:"inherit",...n})}catch(e){return Promise.reject(e)}},Ur={Loading:{use:"Loading.directive",prototype:{loading:"Loading.service"}},MessageBox:{prototype:{msgbox:"MessageBox",alert:"MessageBox.alert",confirm:"MessageBox.confirm",prompt:"MessageBox.prompt"}},Notification:{prototype:{notify:"Notification"}},Message:{prototype:{message:"Message"}}},qr=e=>{const t=Ur[e];if(!t)return`Vue.use(${e})`;const{use:n,prototype:r}=t,i=[];if(n&&i.push(`Vue.use(${n});`),r){const e=Object.entries(r).map((([e,t])=>`Vue.prototype.$${e} = ${t};`));i.push(...e)}return i.join("\n")},Wr=t.resolve(__dirname,"..","package.json"),Yr=JSON.parse(e.readFileSync(Wr,"utf-8"));J.name(Yr.name).version(Yr.version).description(Yr.description),J.option("-i, --input <entry>","entry [file | folder] path").option("-o, --output <output>","output file").option("-r, --resolvers <resolvers>","element-ui").option("-n, --ignore-path <ignore path>","ignore scan files config").parse(process.argv);const Kr=J.opts(),{input:Xr,output:Jr,ignorePath:zr,resolvers:Zr}=Object.assign({},Kr,{input:"",output:"auto-import.js",ignorePath:".genaratorignore",resolvers:"element-ui"}),Qr=process.cwd(),ei=t.resolve(Qr,zr),ti=Ne();if(e.existsSync(ei)){const t=e.readFileSync(ei).toString().replace(/\/$/gm,"");ti.add(t)}const ni=ti.add("node_modules"),ri=n=>{const r=e.readdirSync(n,{withFileTypes:!0}),i=[];return r.forEach((r=>{if(ni.ignores(r.name))return;const o=t.resolve(n,r.name),s=e.statSync(o);s.isDirectory()?i.push(...ri(o)):s.isFile()&&r.name.endsWith(".vue")&&(Dr.path(o),i.push(o))})),i},ii=async n=>{Br(`正在生成${Jr}`);const r=t.resolve(Qr,Jr);let i="";"element-ui"===Zr&&(i=(e=>`\n    import { ${Array.from(e).join()} } from "element-ui"\n    import Vue from "vue"\n    \n    // 全局按需导入的组件列表\n    ${Array.from(e).map(qr).join("\n")}\n  `)(n)),e.existsSync(r)&&e.unlinkSync(r),e.writeFileSync(r,i),Br(`${Jr} 文件已生成`),ni.ignores(Jr)||(Br("正在格式化文件"),await Lr("npx",["prettier",r,"--write"],{stdio:"inherit"}),await Lr("npx",["eslint",r,"--fix"]))};(async()=>{Br("扫描项目文件...");const n=ri(t.resolve(Qr,(Xr||"").replace(/^\//,"")));let r=new Set;n.forEach((t=>{"element-ui"===Zr&&(r=(t=>{const n=new Set,r=e.readFileSync(t,"utf-8"),i=r.matchAll(/<(?:el-|El)([^>\s]+)(?=[\s>])/g);for(const e of i){const t=e[1].replace(/^\w/,(e=>e.toUpperCase()));n.add(t)}const o=r.match(/\bv-loading(?::[^=>\s]+)?/g);o?.length&&n.add("Loading");const s=r.matchAll(/\$(?:msgbox|alert|confirm|prompt|notify|message)/g);for(const e of s){const t=e[0].substring(1);"msgbox"===t||"alert"===t||"confirm"===t||"prompt"===t?n.add("MessageBox"):"notify"===t?n.add("Notification"):"message"===t&&n.add("Message")}return n})(t))})),await ii(r)})().catch((e=>{Dr.error(e.stack??e)}));
